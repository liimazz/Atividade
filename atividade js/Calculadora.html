<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AtividadeJS-04 - Calculadora de Troco</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; background:#f0f7ff; color:#132; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
    .card { background:white; padding:24px; border-radius:8px; box-shadow: 0 8px 20px rgba(10,20,40,0.06); width:420px; text-align:center;}
    h1 { margin:0 0 12px; font-size:20px; }
    button { padding:10px 18px; border-radius:6px; border:0; background:#0066cc; cursor:pointer; color:white; font-weight:700; }
    button:hover { opacity:.95; }
    p.small { color:#445; margin-top:8px; font-size:14px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Atividade: Calculadora de Troco</h1>
    <p class="small">Clique para informar produto, preço e valor em dinheiro.</p>
    <button id="trocoBtn">Calcular Troco</button>
  </div>

  <script>
    function formatReal(valor) {
      // formata número para R$X,00 com duas casas decimais e separador decimal vírgula
      return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }).replace(/\u00A0/g, ' ');
    }

    document.getElementById('trocoBtn').addEventListener('click', function(){
      let produto = prompt('Qual é o nome do produto que está sendo comprado?');
      if (produto === null) return;
      produto = produto.trim();
      if (!produto) {
        alert('Nome do produto não informado. Tente novamente.');
        return;
      }

      let precoStr = prompt(`Qual é o preço do(a) ${produto}? (ex: 15.50 ou 15,50)`);
      if (precoStr === null) return;
      precoStr = precoStr.trim().replace(',', '.');
      if (precoStr === '' || isNaN(Number(precoStr))) {
        alert('Preço inválido. Informe um valor numérico. Tente novamente.');
        return;
      }
      let preco = parseFloat(precoStr);

      let pagoStr = prompt('Quanto em dinheiro o cliente entregou para realizar o pagamento? (ex: 20 ou 20,00)');
      if (pagoStr === null) return;
      pagoStr = pagoStr.trim().replace(',', '.');
      if (pagoStr === '' || isNaN(Number(pagoStr))) {
        alert('Valor entregue inválido. Informe um valor numérico. Tente novamente.');
        return;
      }
      let pago = parseFloat(pagoStr);

      // calcular troco
      let troco = pago - preco;

      // Caso pagamento insuficiente — avisar e permitir nova tentativa
      if (troco < 0) {
        alert(`Valor entregue insuficiente. Faltam ${formatReal(Math.abs(troco))}.`);
        return;
      }

      // exibir mensagem no formato pedido
      // “Você comprou [produto], que custa R$X,00. Deu R$Y,00 em dinheiro e vai receber R$Z,00 de troco! Volte sempre!”
      alert(
        `Você comprou ${produto}, que custa ${formatReal(preco)}. ` +
        `Deu ${formatReal(pago)} em dinheiro e vai receber ${formatReal(troco)} de troco! Volte sempre!`
      );
    });
  </script>
</body>
</html>